% 501 - Homework 2 
% Riley Blair
clc; clear;

M = [[1, 0,  0,      0]; 
     [0, 0, -1, -32.32]; 
     [0, 1,  0,    -55]; 
     [0, 0,  0,      1]];
Slist = [[-1;  0; 0;   0; -10;   -25], ...
         [ 0; -1; 0; -20;   0;     0], ...
         [ 1;  0; 0;   0; -45; 42.32]];

% 1a)
thetalist =[deg2rad(60); deg2rad(90); 0];
a_1 = FKinSpace(M,Slist,thetalist)
% a_1 =
%     0.0000   -1.0000         0   35.0000
%     0.8660    0.0000   -0.5000  -54.6408
%     0.5000    0.0000    0.8660    1.3393
%          0         0         0    1.0000


% 1b)
eomg = 0.01;
ev = 0.001;

    % T1)
T = [[1, 0,  0,      0]; 
     [0, 0, -1, -32.32]; 
     [0, 1,  0,    -55]; 
     [0, 0,  0,      1]];
thetalist0 = [0; 0; 0];

[b_1, success] = IKinSpace(Slist, M, T, thetalist0, eomg, ev);
b_1
% b_1 = [0; 0; 0]

    % T2)

T = [[0.7071,   -.5,   -.5,  27.6777];
     [.7071,     .5,    .5, -82.6777]; 
     [    0, -.7071, .7071,    27.32]; 
     [    0,      0,     0,        1]];
thetalist0 = [0; 0; 0];

[b_2, success] = IKinSpace(Slist, M, T, thetalist0, eomg, ev);
b_2
% b_2 = [1.5708; .7854; -.7854]

    % T3)

T = [[0.866,   .25,  -.433, -10.6699];
     [-.433,  .808, -.3995, -65.1557]; 
     [  .25, .5335,   .808,  37.4098]; 
     [    0,     0,      0,        1]];
thetalist0 = [deg2rad(180); deg2rad(-45); deg2rad(90)];

[b_3, success] = IKinSpace(Slist, M, T, thetalist0, eomg, ev);
b_3
% b_3 = [2.0944; -.5236; 1.0472]


% Question2 

% part a

s1 = [0;0;1;    0;0;0];
s2 = [0;1;0;-0.34;0;0];
s3 = [0;0;1;0;0;0];
s4 = [0;1;0;-0.74;0;0];
s5 = [0;0;1;0;0;0];
s6 = [0;1;0;-1.14;0;0];
s7 = [0;0;1;0;0;0];

J_s_0 = [s1,s2,s3,s4,s5,s6,s7];

% part b

b1 = [0;0;1;    0;0;0];
b2 = [0;1;0;-0.95;0;0];
b3 = [0;0;1;    0;0;0];
b4 = [0;1;0;-0.55;0;0];
b5 = [0;0;1;    0;0;0];
b6 = [0;1;0;-0.15;0;0];
b7 = [0;0;1;    0;0;0];

J_b_0 = [b1,b2,b3,b4,b5,b6,b7];

% part c 

J_b_0_rank = rank(J_b_0) % 3
J_s_0_rank = rank(J_s_0) % 3

 % part e

tlist = ones(7,1) * deg2rad(30);
J_s_30 = JacobianSpace(J_s_0,tlist);

Fs = ones(6,1);

torques = transpose(J_s_30) * Fs
% torques =
% 
%     1.0000
%    -0.0984
%     1.6113
%    -0.7904
%     1.7083
%    -0.5119
%     1.1738




